---
title: nginx 反向代理上 Pixiv
date: 2018-09-24 15:40:34
tags:
- Nginx
- Hosts
- Linux
categories:
- 后端
---

Pixiv 被墙了，上不了。我上了 Pixiv 的贴吧，刚好发现有人发帖说如何再上 P 站（ https://tieba.baidu.com/p/5882385726 ） 。使用 nginx 做反向代理，看着比较简单，于是自己试了试，由于 nginx 自己不太熟，所以是尽量完成。
<!--more-->
首先得说明的是，帖子里给的是 windows 和安卓的，我个人用 linux ，所以有出入，可以根据原理改一下以适应于 linux 。

首先先把文件下下来，然后在电脑上安装 nginx 。这里有挺多坑的，如果有问题先用 -t 选项测一测，没有问题就可以运行。 Debian 默认要 root 才能运行。

把下载的文件解压，然后把 conf 文件夹下面所有的文件移动到 conf.d 下，测试运行一下有错。打开 conf.d 下的 nginx.conf ，把里面除了 server 这个选项的其他选项全部注释，将将证书地址改为绝对地址，然后启动 nginx 。

之后是改 hosts 。

将 pixiv 全部指向 localhost ，刷一下网络。在浏览器里打开 P 站，出现安全问题。

如果是火狐，可以直接点高级选项添加例外；如果是 chrome 的话则要打开设置，进入管理证书，加入授权证书。现在可以正常打开了。

总的来说其实不是特别完美，不过能用是差不多了。出现安全问题主要是不是所有的连接都使用 https 造成的，这样反向代理如果能改成 https 的话就好很多，不过能用已经很开心了，有时间可以再鼓捣。
